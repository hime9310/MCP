# Kiro

## 概要
デスクトップ版Kiro IDEのインストール後、構築済みのMCPサーバ（Fargate）と連携させるための詳細な手順とテスト項目をまとめました。

VS Code拡張版とは異なり、デスクトップ版は独立したアプリケーションとして動作するため、設定の反映やトラブルシューティングがより直感的になります。

### 1. Kiro IDE（デスクトップ版）連携手順

FargateタスクがPort 80で稼働している前提の手順です。

#### 手順①：最新のタスクIPを取得

1. AWSマネジメントコンソールで **ECS** ＞ **クラスター** ＞ **サービス** ＞ **タスク** を開きます。
2. 「RUNNING」状態のタスクの「プライベートIP」をコピーします。

#### 手順②：Kiroの設定（MCPサーバ登録）

1. Kiro IDEを起動し、左下の設定（ギアアイコン）から「MCP」または「Model Context Protocol」の設定項目を選択します。
2. 「Add Server」を選択し、以下の情報を入力します。
* **Server Name**: `mcp-poc-server` (任意)
* **Type**: `SSE` (Marketplace公式イメージの多くが採用している通信方式)
* **URL**: `http://[取得したプライベートIP]:80/sse`
* ※製品ドキュメントによりエンドポイント名が `/sse` 以外（例: `/message`）の場合は、それに合わせて修正してください。



---

### 2. 連携確認テスト（Kiro単体版用）

インストール完了直後に実施する検証ステップです。

#### テスト1：インフラ疎通確認（Kiro起動前）

* **内容**: Local PCからPort 80でFargateタスクへ通信可能か。
* **方法**: ターミナルで `curl -v http://[タスクIP]:80` を実行。
* **期待値**: `Connected to [タスクIP] port 80` と表示されること。

#### テスト2：Kiro内部のサーバ認識確認

* **内容**: KiroがMCPサーバを正常なエンドポイントとして認識しているか。
* **方法**: Kiroの設定画面で、追加したサーバのステータスを確認します。
* **期待値**: ステータスが「Active」または「Connected」（緑色のアイコン）になっていること。

#### テスト3：機能呼び出しテスト

* **内容**: AIがMCPサーバのツールを実際に利用できるか。
* **方法**: チャット欄に「現在接続されているMCPサーバが持っているツールを教えて」と入力します。
* **期待値**: MCPサーバ（Marketplaceイメージ）が提供する具体的な機能一覧が回答されること。

---

### 3. トラブルシューティング（IP変動時の対応）

PoCフェーズ（dev環境）において、再起動によりIPが変わった際の対応手順です。

1. **接続エラー発生**: Kiroのチャットでエラーが出る、または設定画面のステータスが赤色になった場合。
2. **IP再取得**: 再び手順①に従い、最新のタスクIPを確認します。
3. **設定更新**: KiroのMCP設定画面でURL内のIPアドレスを書き換え、「Save/Apply」を押します。
4. **反映確認**: 再度「テスト2」を実施し、ステータスが緑色に戻ることを確認します。

---

### 今後のステップ

この手順書をMarkdownファイル（例：`Kiro_MCP_Setup_Guide.md`）として保存し、チーム内で共有しておくと、Kiroのインストール許可が降りた際にスムーズに展開できます。
